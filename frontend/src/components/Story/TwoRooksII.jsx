// ICONS
const rin = 'https://file.garden/ZvdEiabDvGKGr36j/Illustration33.png';
const tera = 'https://img.notionusercontent.com/s3/prod-files-secure%2Fe99cfe6f-3fec-4c86-b805-3235000eb51a%2Fe964770d-173f-44ad-b756-68a4cbcdce86%2FZ_TERA.png/size/w=2000?exp=1737483683&sig=ee66aNpDSsKvtNDobUwblj3iQlFIPKuVBNVkAi6sPu0';
const adam = 'https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/d84c154c-d6e8-4f39-8f13-a74ec2521773/dij0hzs-ce4b4ca4-1fad-47ac-bf86-e9fbdada299f.png/v1/fit/w_600,h_600,q_70,strp/untitled_by_twendigo_dij0hzs-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NjAwIiwicGF0aCI6IlwvZlwvZDg0YzE1NGMtZDZlOC00ZjM5LThmMTMtYTc0ZWMyNTIxNzczXC9kaWowaHpzLWNlNGI0Y2E0LTFmYWQtNDdhYy1iZjg2LWU5ZmJkYWRhMjk5Zi5wbmciLCJ3aWR0aCI6Ijw9NjAwIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.gxPkkYhOd_xA2eBGHGJydxTmf9R-g1UTjpbf2MIqfIo'
const black ='https://i.ibb.co/MSWT8Hw/vine-black-painted-swatch-300x300.jpg';
const war = 'https://i.ibb.co/12x2zgV/transwar.png'
const vinca = 'https://nyewwe.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fe99cfe6f-3fec-4c86-b805-3235000eb51a%2F1388b2be-e6c6-43c1-8355-81e1c94a6250%2FZ_VINCA.png?table=block&id=71fa2989-49b8-4392-80ac-39aca74876dc&spaceId=e99cfe6f-3fec-4c86-b805-3235000eb51a&width=2000&userId=&cache=v2;';
const cc = 'https://i.ibb.co/vd6pdDd/CHOU-CHOU.png';
const makoto = 'https://i.ibb.co/fkHfncY/MAKOTO.png';
const juniper = 'https://i.ibb.co/N9CfYZW/gin-picrew.png';
const cain = 'https://file.notion.so/f/f/e99cfe6f-3fec-4c86-b805-3235000eb51a/316b4e71-17cb-4ec8-b9c2-2f5bcfe12bf6/image.png?table=block&id=16720355-38d1-4b01-938d-ce5f659ce642&spaceId=e99cfe6f-3fec-4c86-b805-3235000eb51a&expirationTimestamp=1737302400000&signature=Cdxk5xEl2dJu2z_5soPdScDOo7YlcHnhUD9vLoNmW9o&downloadName=image.png';
const vika = 'https://i.ibb.co/q9Zr763/image.webp';
const damir = 'https://i.ibb.co/qp6DjkF/Illustration2-2-1.png';
const harvey = 'https://i.ibb.co/T08W2sj/harvey-base-colo.png';
const milky = 'https://i.ibb.co/XYQpcT6/MILKY.png';
const yuenris = 'https://nyewwe.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fe99cfe6f-3fec-4c86-b805-3235000eb51a%2F352cd77e-fa73-4420-bc74-d187cfb7d242%2FZ_YUENRIS.png?table=block&id=ab495cb4-1e63-41fc-a595-c98ecbb56f53&spaceId=e99cfe6f-3fec-4c86-b805-3235000eb51a&width=2000&userId=&cache=v2';

const satella = 'https://i.ibb.co/QnQr8YJ/SATELLA.png';
const preston = 'https://i.ibb.co/HxHWzWP/atlas-picrew-1.webp';
const scottie = 'https://i.ibb.co/HqqFTZb/SCOTTIE.png';
const hong = 'https://i.ibb.co/1rDC4hx/HONG.png';
const oma = 'https://i.ibb.co/mCkGm10/OMA.png';
const eris = 'https://i.ibb.co/RDD9VDK/ERIS.png';
const yunge = 'https://img.notionusercontent.com/s3/prod-files-secure%2Fe99cfe6f-3fec-4c86-b805-3235000eb51a%2F958ed487-bd04-49a4-82e2-55cc5e9d928d%2Fimage.png/size/w=2000?exp=1737334948&sig=YZ7-TCO7CNhSbVE2hDGww6e-c9GZ5vezUwNPJ3CVHfw';
const rowan = 'https://nyewwe.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fe99cfe6f-3fec-4c86-b805-3235000eb51a%2F3cd778e1-150a-491f-b988-f59ec3d8d5c6%2Fimage.png?table=block&id=e0c443ea-1735-4d28-8743-7fc106ba3b4e&spaceId=e99cfe6f-3fec-4c86-b805-3235000eb51a&width=2000&userId=&cache=v2';
const tk = 'https://i.ibb.co/syKYjns/tkuni.png';
const dingo = 'https://i.ibb.co/LgqYzbw/DINGO.png';
const crimson = 'https://i.ibb.co/wQgpXYL/crimson4.jpg';
const rider = 'https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/b702d9b9-48c3-46e2-9591-7766a3f20658/di99ogy-9e922e77-00b4-45b7-90d5-be4f3f6c4daf.png/v1/fit/w_600,h_600,q_70,strp/vfa_rider_by_khialling_di99ogy-375w-2x.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NjAwIiwicGF0aCI6IlwvZlwvYjcwMmQ5YjktNDhjMy00NmUyLTk1OTEtNzc2NmEzZjIwNjU4XC9kaTk5b2d5LTllOTIyZTc3LTAwYjQtNDViNy05MGQ1LWJlNGYzZjZjNGRhZi5wbmciLCJ3aWR0aCI6Ijw9NjAwIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.EjFrNYvAiwVGWC7yHW50a2gTuWtrXciNFD_RGufTh4Q'
const october = 'https://i.ibb.co/gvxbNYM/image.png';
const eden = 'https://i.ibb.co/tpXbxCw/EDEN.png';
const beatrix = 'https://i.ibb.co/CQ5fKMm/BEATRIX.png';
const pomme = 'https://i.ibb.co/v4m2QpF/vfx-pomme-picrew.png';
const tomoya = 'https://i.ibb.co/6NhGwhp/TOMOYA.png';

import React, { useEffect, useState } from 'react';
import { useSelector } from 'react-redux';
import '../Story/Story.css';
import { Link } from 'react-router-dom';

function TwoRooksII() {

    const [hasAttended, setHasAttended] = useState(false);
    const story = 'Two Rooks';
    const sessionUser = useSelector((state) => state.session.user);

    const checkAttendance = async () => {
        const response = await fetch(`/api/story/${story}/check`, {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          },
        });
    
        if (response.ok) {
          const data = await response.json();
          setHasAttended(data.hasAttended);
        }
      };
    
      useEffect(() => {
        if (sessionUser) {
          checkAttendance();
        } else {
          setHasAttended(false);
        }
      }, [sessionUser]);

    
    const attendStory = () => {
        csrfFetch(`/api/story/attend`, {
            method: 'POST',
            headers: {
            'Content-Type': 'application/json',
            },
            body: JSON.stringify({ story }),
        })
            .then((response) => {
            if (!response.ok) {
                throw new Error('Unable to add attendance.');
            }
            return response.json();
            })
            .then(() => {
            setHasAttended(true);
            })
    };

  return (
    <div className="main-content">
        <div className='story-body'>
        <div className='big center alt-font'><b>TWO ROOKS (PART 2): START</b></div>
        <div className='story-speech npc'>
            <Link to={`/characters/Rin`}><img src={rin} 
            style={{ border: '2px solid #c21c1c', borderRadius: '50px'}} className='story-avatar'></img></Link>
            <div className="story-speech-text">
            <div className="story-speech-name">RIN</div>
            <p>â€œYouâ€”â€</p>
            <p>Rin appears from somewhere off to the side. Gauntlets swing at Viktoriya, the light from his collar glowing red as he turns his voidpact powers on.</p>
            </div>
        </div>

        <div className='story-speech npc'>
            <img src={vika} 
                className='story-avatar'/>
            <div className="story-speech-text">
                <div className="story-speech-name">Viktoriya Yunge</div>
                <p>â€œ!â€</p>
                <p>Viktoriya steps away from the attack. In one quick motion, she hits the back of Rinâ€™s neck with her cane. A loud thump echoes through the air.</p>
                <p>Rin collapses to the ground, unconscious.</p>
                <p>â€œ...â€</p>
                <p>The sound of static crackles. Viktoriya puts a hand to her ear, as if listening to something.</p>
                <p className='small'>â€œYes, understood.â€</p>
                <p>Mismatched eyes settle on the scene, glancing over you one by one. Viktoriya straightens her posture, her cane tapped loudly to the ground.</p>
                <p>â€œ...Voxenfelle Academy.â€</p>
                <p>â€œHand over the flash drive immediately. If you do not forfeit it within five minutes,â€</p>
                <p><b>â€œâ€”It will be taken from you by force.â€</b></p>
            </div>
            </div>

            <p>The clock ticks.</p>
            <p>In front of youâ€”in the fleshâ€”is Viktoriya Yunge, daughter of the Defense Minister.</p>
            <p>Something cold washes over you in her presence. Itâ€™s a different feeling from Cain; while he was obviously dangerous, it was always a gamble with himâ€”a man who was in it for the thrill of the game and nothing else.</p>
            <p>But Viktoriya was a different story. You can feel it in your bones.</p>
            <p>This was Nikola Yungeâ€™s guard dog. The ace up his sleeve, the shadow trailing behind him, the last chess piece on the board,</p>
            <p>And the one whoâ€™ll turn the tide in his favour.</p>

            <div className='story-speech npc'>
            <img src={tera} 
                className='story-avatar'/>
            <div className="story-speech-text">
                <div className="story-speech-name">Tera</div>
                <p className='alt-font'>â€œâ€”Hello, can you all hear me?â€</p>
            </div>
            </div>

            <p>Suddenly, a voice springs to life in your ear. Tera calls out to you from the intercoms. </p>

            <div className='story-speech npc'>
            <img src={tera} 
                className='story-avatar'/>
            <div className="story-speech-text">
                <div className="story-speech-name">Tera</div>
                <div className='alt-font'>
                <p>â€œIâ€™ve been informed that Yungeâ€™s daughter has arrived at the school. Please avoid engaging with her as much as possible. We donâ€™t know what her aura is, and she may be highly dangerous.â€</p>
                <p>â€œYour priority right now is Sullivanâ€™s flash drive. Itâ€™ll take a while for Viktoriya to reach the main building. If we can upload the contents online before she reaches us, then itâ€™s game over for both her and Yunge.â€</p>
                <p>â€œSome of you will have to stay and hold her off. We need to hurryâ€”we donâ€™t have much time left.â€</p>
                </div>
            </div>
            </div>

            <p className='big'>WIP</p>

            </div>

        <div className="story-end">
            <hr />
            <div className='attendance'>
            {sessionUser && (
                <div>
                {hasAttended ? (
                    <p>You have already attended this story.</p>
                ) : (
                    <button onClick={attendStory}>Complete Attendance</button>
                )}
                </div>
            )}
            </div>
            <div className="story-footer">
                <Link to={`/story/Two Rooks I`}>ğŸ „ Previous</Link>
                <Link to={`/story`}>Next ğŸ †</Link>
            </div>
            </div>

    </div>
  );
}

export default TwoRooksII;
